<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0//EN" "http://www.w3.org/TR/REC-html40/strict.dtd">

<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><title>cpct_drawToSpriteBufferMasked - . .</title><link rel="stylesheet" type="text/css" href="../../../styles/main.css"><script language=JavaScript src="../../../javascript/main.js"></script><script language=JavaScript src="../../../javascript/prettify.js"></script><script language=JavaScript src="../../../javascript/searchdata.js"></script></head><body class="ContentPage" onLoad="NDOnLoad();prettyPrint();"><script language=JavaScript><!--
if (browserType) {document.write("<div class=" + browserType + ">");if (browserVer) {document.write("<div class=" + browserVer + ">"); }}// --></script>

<!--  Generated by Natural Docs, version 1.52 -->
<!--  http://www.naturaldocs.org  -->

<!-- saved from url=(0026)http://www.naturaldocs.org -->




<div id=Content><div class="CFunction"><div class=CTopic id=MainTopic><h1 class=CTitle><a name="cpct_drawToSpriteBufferMasked"></a>cpct_drawToSpriteBufferMasked</h1><div class=CBody><p>Draws an sprite inside another sprite&rsquo;s buffer, using mask as transparency information to prevent erasing the background.&nbsp; This permits using the destination sprite as a temporary screen back buffer.</p><h4 class=CHeading>C Definition</h4><p>void <a href="#cpct_drawToSpriteBufferMasked" class=LFunction id=link1 onMouseOver="ShowTip(event, 'tt1', 'link1')" onMouseOut="HideTip('tt1')">cpct_drawToSpriteBufferMasked</a> (<a href="../../types-h.html#u16" class=LType id=link2 onMouseOver="ShowTip(event, 'tt2', 'link2')" onMouseOut="HideTip('tt2')">u16</a> <b>buffer_width</b>, void* <b>inbuffer_ptr</b>, <a href="../../types-h.html#u8" class=LType id=link3 onMouseOver="ShowTip(event, 'tt3', 'link3')" onMouseOut="HideTip('tt3')">u8</a> <b>width</b>, <a href="../../types-h.html#u8" class=LType id=link4 onMouseOver="ShowTip(event, 'tt3', 'link4')" onMouseOut="HideTip('tt3')">u8</a> <b>height</b>, void* <b>sprite</b>) __z88dk_callee;</p><h4 class=CHeading>Input Parameters (7 bytes)</h4><table border=0 cellspacing=0 cellpadding=0 class=CDescriptionList><tr><td class=CDLEntry>(1B B)  buffer_width</td><td class=CDLDescription>Width in bytes of the Sprite used as Buffer (&gt;0, &gt;=width)</td></tr><tr><td class=CDLEntry>(2B DE) inbuffer_ptr</td><td class=CDLDescription>Destination pointer (pointing inside sprite buffer)</td></tr><tr><td class=CDLEntry>(1B C)  width</td><td class=CDLDescription>Sprite Width in bytes (&gt;0)</td></tr><tr><td class=CDLEntry>(1B A)  height</td><td class=CDLDescription>Sprite Height in bytes (&gt;0)</td></tr><tr><td class=CDLEntry>(2B HL) sprite</td><td class=CDLDescription>Source Sprite Pointer (array with pixel data along with mask data)</td></tr></table><p>Assembly Call (Input parameters on Registers)</p><blockquote><pre>call cpct_drawToSpriteBufferMasked_asm</pre></blockquote><h4 class=CHeading>Parameter Restrictions</h4><ul><li><b>buffer_width</b> must be greater or equal than <b>width</b>.&nbsp; Drawing a sprite into a buffer sprite that is shorter will probably cause sprite lines to be displaced, and can potentially cause random memory outside buffer to be overwriten, leading to unforeseen consequencies.</li><li><b>inbuffer_ptr</b> must be a pointer to the place where <b>sprite</b> will be drawn inside the sprite buffer.&nbsp; It can point to any of the bytes in the array of the destination sprite buffer.&nbsp; That will be the place where the first byte of the <b>sprite</b> will be copied to (its top-left corner).&nbsp; It is important to check that there is enough space for the sprite to be copied from that byte on.&nbsp; Otherwise, the copy loop will continue outside the sprite buffer boundaries.</li><li><b>width</b> must be the width of the sprite <b>in bytes</b>, <b>excluding mask data</b>, and must be 1 or more.&nbsp; Using 0 as <b>width</b> parameter for this function could potentially make the program hang or crash.&nbsp; Always remember that the <b>width</b> must be expressed in bytes and <b>not</b> in pixels.&nbsp; The correspondence is:</li></ul><table border=0 cellspacing=0 cellpadding=0 class=CDescriptionList><tr><td class=CDLEntry>mode 0</td><td class=CDLDescription>1 byte = 2 pixels</td></tr><tr><td class=CDLEntry>modes 1 / 3</td><td class=CDLDescription>1 byte = 4 pixels</td></tr><tr><td class=CDLEntry>mode 2</td><td class=CDLDescription>1 byte = 8 pixels</td></tr></table><ul><li><b>height</b> must be the height of the sprite in bytes, and must be greater than 0.&nbsp; There is no practical upper limit to this value.&nbsp; Height of a sprite in bytes and pixels is the same value, as bytes only group consecutive pixels in the horizontal space.</li><li><b>sprite</b> must be an array containing sprite&rsquo;s pixels data in screen pixel format along with mask data, take a look at <a href="../cpct_drawSpriteMasked-asm.html#cpct_drawSpriteMasked" class=LFunction id=link5 onMouseOver="ShowTip(event, 'tt4', 'link5')" onMouseOut="HideTip('tt4')">cpct_drawSpriteMasked</a>.</li></ul><h4 class=CHeading>Known limitations</h4><ul><li>This function <b>will not work from ROM</b>, as it uses self-modifying code.</li><li>This function does not do any kind of boundary check or clipping.&nbsp; If you try to draw sprites on the frontier of the buffer or the sprite it might potentially overwrite memory locations beyond boundaries.&nbsp; In particular, pay attention to the heights of the sprites and the place where the sprite is going to be drawn, to ensure that last lines of the sprites are not &ldquo;drawn&rdquo; outside the buffer&rsquo;s memory.&nbsp; This could cause your program to behave erratically, hang or crash.&nbsp; Always take the necessary steps  to guarantee that you are drawing inside buffer boundaries.</li><li>As this function receives a byte-pointer to memory, it can only draw byte-sized and byte-aligned sprites.&nbsp; This means that the box cannot start on non-byte aligned pixels (like odd-pixels, for instance) and their sizes must be a multiple of a byte (2 in mode 0, 4 in mode 1 and 8 in mode 2).</li></ul><h4 class=CHeading>Details</h4><p>This function copies a generic WxH bytes sprite from memory to a buffer-memory or another sprite.&nbsp; Both origin and destination sprites must be stored as arrays (i.e. with all of their pixels stored as consecutive bytes in memory).&nbsp; It works in a similar way to <a href="../cpct_drawSpriteMasked-asm.html#cpct_drawSpriteMasked" class=LFunction id=link6 onMouseOver="ShowTip(event, 'tt4', 'link6')" onMouseOut="HideTip('tt4')">cpct_drawSpriteMasked</a>, but drawing to a linearly-disposed memory (as in the case of a sprite array), instead of a screen video memory formatted one.</p><p>The function copies bytes one by one from the origin sprite to the place within the destination sprite marked by <b>inbuffer_ptr</b>.&nbsp; The process does a &ldquo;blending&rdquo; instead of a raw copy.&nbsp; The blending depends on the mask that must be included within the origin sprite, interlaced with its colour pixel data (in the same format as for <a href="../cpct_drawSpriteMasked-asm.html#cpct_drawSpriteMasked" class=LFunction id=link7 onMouseOver="ShowTip(event, 'tt4', 'link7')" onMouseOut="HideTip('tt4')">cpct_drawSpriteMasked</a>).&nbsp; The blending consist in applying the mask to the bytes from the origin sprite (AND operation), then mixing the result with the bytes from the destination sprite (OR operation).&nbsp; This is designed mainly to be used for simulating transparency on the origin sprite.</p><p>This code shows a great example of what can be done with this function,</p><blockquote><pre class="prettyprint">// Constants defining sizes and locations
// &quot;Viewport&quot; is the sprite buffer drawn in the screen video memory
#define  SPRBUFFER_W    60 // Width of the sprite buffer IN BYTES
#define  SPRBUFFER_H    80 // Height of the sprite buffer in pixels (same as in bytes)
#define  VIEW_X         10 // X Coordinate of the Viewport (location where sprite buffer is drawn in screen video memory)
#define  VIEW_Y         30 // Y Coordinate of the Viewport (location where sprite buffer is drawn in screen video memory)
#define  G_SHIP_W       28 // Width of the sprite of the ship IN BYTES
#define  G_SHIP_H       20 // Height of the sprite of the ship in pixels (same as in bytes)
#define  SHIP_X         12 // X coordinate of the ship inside the sprite buffer (IN BYTES)
#define  SHIP_Y         15 // Y coordinate of the ship inside the sprite buffer (in pixels, same as in bytes)
// As Viewport location is fixed, we can define it as a pre-calculated constant
// We use the calculation macro for this purpose, as it will be compiled to the result.
#define  VIEW_PTR       cpctm_screenPtr(CPCT_VMEM_START, VIEW_X, VIEW_Y)

// Array used as sprite back buffer. Drawing is performed inside here first.
// After all drawings are performed, this sprite can be drawn in 1 single step
// to the actual screen video memory
u8 gSpBackBuffer[SPRBUFFER_W * SPRBUFFER_H];

// .... Other functions go here ....

// This function draws all elements to the sprite back buffer. Afterwards, it
// waits for VSYNC and then it draws the sprite back buffer to the screen video memory
void  drawEverything() {
   u8* drawPtr;

   // .... Other drawings here (tiles, background, sprites...)

   // Calculate exact byte location inside the sprite buffer where our ship
   // has to be drawn, according to its coordinates (X, Y). (Coordinates are
   // local to the sprite buffer space, being (0,0) the first byte, up-left corner)
   drawPtr = cpctm_spriteBufferPtr(gSpBackBuffer, SPRBUFFER_W, SHIP_X, SHIP_Y);
   // Now that we have the exact byte location, draw the
   // sprite of the ship to the sprite back buffer
   cpct_drawToSpriteBufferMasked(SPRBUFFER_W, drawPtr, G_SHIP_W, G_SHIP_H, g_ship);

   // .... Other drawings here (tiles, background, sprites...)

   // All drawings are finished, wait for VSYNC and then copy
   // the sprite buffer to screen video memory
   cpct_waitVSYNC();
   cpct_drawSprite(gSpBackBuffer, VIEW_PTR, SPRBUFFER_W, SPRBUFFER_H);
}</pre></blockquote><p>Drawing to sprites instead of the screen lets us do as many draw operations as required without worrying about the raster and flickering or tearing effects.&nbsp; As nothing is being changed in video memory, no problematic effects are produced.&nbsp; Once the image is composed in one or a few sprites, these can be drawn to the screen.&nbsp; This minimizes the total cycles required to copy data from memory to video memory.</p><p>Also, as destination sprite is a normal sprite with its data distributed linear in memory, calculating a position inside the sprite is easier than in video memory.&nbsp; It only requires multiplying the y-coordinate by the width of the sprite-buffer (to jump from its start point to the y-th line), then adding the x-coordinate.&nbsp; Everything is also added to the starting point of the sprite buffer.&nbsp; Moreover, this calculations can be easily sped up by carefully selecting the width of the sprite-buffer.&nbsp; If it is a power of 2, then multiplications will become simple shifts, speeding up the proccess.</p><h4 class=CHeading>Destroyed Register values</h4><p>AF, BC, DE, HL</p><h4 class=CHeading>Required memory</h4><table border=0 cellspacing=0 cellpadding=0 class=CDescriptionList><tr><td class=CDLEntry>C-bindings</td><td class=CDLDescription>30 bytes</td></tr><tr><td class=CDLEntry>ASM-bindings</td><td class=CDLDescription>24 bytes</td></tr></table><h4 class=CHeading>Time Measures</h4><blockquote><pre class="prettyprint"> Case      |   microSecs (us)   |     CPU Cycles
-----------------------------------------------------
 Any       |  13 + (17 + 12W)H   | 52 + (68 + 48W)H
-----------------------------------------------------
 W=2,H=16  |         749        |        2996
 W=4,H=32  |        2573        |        10292
-----------------------------------------------------
Asm saving |         -19        |        -76
-----------------------------------------------------</pre></blockquote><p>W = Sprite width in bytes H = Sprite height in bytes</p><h4 class=CHeading>Credits</h4><p>Original routine was discussed and developed in CPCWiki by @Docent, @Xifos, @demoniak and @Arnaud.&nbsp; Thanks to all of them for their help and support,</p><p><a href="http://www.cpcwiki.eu/forum/programming/help-for-speed-up-to-copy-sprite-array-to-another/" class=LURL target=_top>http://www.cpcwiki.eu<wbr>/forum<wbr>/programming<wbr>/help-for-speed-up-to-copy-sprite-array-to-another<wbr>/</a></p></div></div></div>

</div><!--Content-->


<div id=Footer>&copy;opyright 2018 CPCtelera authors. Distributed under GNU GPL License.&nbsp; &middot;&nbsp; Last updated 2018/10/19&nbsp; &middot;&nbsp; <a href="http://www.naturaldocs.org">Generated by Natural Docs</a></div><!--Footer-->


<div id=Menu><div class=MTitle>. .<div class=MSubTitle></div></div><div class=MEntry><div class=MLink><a href="https://github.com/lronaldo/cpctelera">CPCtelera at Github</a></div></div><div class=MEntry><div class=MFile><a href="../../readme-txt.html">CPCtelera Reference Manual</a></div></div><div class=MEntry><div class=MFile><a href="../../authors-txt.html">Authors</a></div></div><div class=MEntry><div class=MFile><a href="../../license-txt.html">License</a></div></div><div class=MEntry><div class=MText>______________________________________________________________________</div></div><div class=MEntry><div class=MFile><a href="../../types-h.html">Aliases for builtin types</a></div></div><div class=MEntry><div class=MFile><a href="../../buildsys/asset_conversion-txt.html">Asset Conversion Utilities</a></div></div><div class=MEntry><div class=MFile><a href="../../buildsys/vscode_integration-txt.html">Visual Studio Code</a></div></div><div class=MEntry><div class=MGroup><a href="javascript:ToggleMenu('MGroupContent1')">Audio</a><div class=MGroupContent id=MGroupContent1><div class=MEntry><div class=MFile><a href="../../audio/arkostracker-s.html">Arkos Player Functions</a></div></div><div class=MEntry><div class=MFile><a href="../../audio/arkosplayer-txt.html">Arkos Player Manual</a></div></div><div class=MEntry><div class=MFile><a href="../../audio/audio-h.html">Audio Constants&amp;Variables</a></div></div><div class=MEntry><div class=MLink><a href="arkostracker-s.html&#x23;cpct_akp_musicPlay">cpct_akp_musicPlay</a></div></div><div class=MEntry><div class=MLink><a href="arkostracker-s.html&#x23;cpct_akp_musicInit">cpct_akp_musicInit</a></div></div><div class=MEntry><div class=MLink><a href="arkostracker-s.html&#x23;cpct_akp_stop">cpct_akp_stop</a></div></div><div class=MEntry><div class=MLink><a href="arkostracker-s.html&#x23;cpct_akp_SFXGetInstrument">cpct_akp_SFXGetInstrument</a></div></div><div class=MEntry><div class=MLink><a href="arkostracker-s.html&#x23;cpct_akp_SFXInit">cpct_akp_SFXInit</a></div></div><div class=MEntry><div class=MLink><a href="arkostracker-s.html&#x23;cpct_akp_SFXStopAll">cpct_akp_SFXStopAll</a></div></div><div class=MEntry><div class=MLink><a href="arkostracker-s.html&#x23;cpct_akp_SFXPlay">cpct_akp_SFXPlay</a></div></div><div class=MEntry><div class=MLink><a href="arkostracker-s.html&#x23;cpct_akp_stop">cpct_akp_SFXStop</a></div></div><div class=MEntry><div class=MLink><a href="arkostracker-s.html&#x23;cpct_akp_setFadeVolume">cpct_akp_setFadeVolume</a></div></div></div></div></div><div class=MEntry><div class=MGroup><a href="javascript:ToggleMenu('MGroupContent2')">Bitarray</a><div class=MGroupContent id=MGroupContent2><div class=MEntry><div class=MFile><a href="../../bitarray/cpct_bitWeightsVector-s.html">cpct_bitWeights</a></div></div><div class=MEntry><div class=MFile><a href="../../bitarray/cpct_get2Bits-asm.html">cpct_get2Bits</a></div></div><div class=MEntry><div class=MFile><a href="../../bitarray/cpct_get4Bits-asm.html">cpct_get4Bits</a></div></div><div class=MEntry><div class=MFile><a href="../../bitarray/cpct_get6Bits-asm.html">cpct_get6Bits</a></div></div><div class=MEntry><div class=MFile><a href="../../bitarray/cpct_getBit-asm.html">cpct_getBit</a></div></div><div class=MEntry><div class=MFile><a href="../../bitarray/cpct_set2Bits-asm.html">cpct_set2Bits</a></div></div><div class=MEntry><div class=MFile><a href="../../bitarray/cpct_set4Bits-asm.html">cpct_set4Bits</a></div></div><div class=MEntry><div class=MFile><a href="../../bitarray/cpct_set6Bits-asm.html">cpct_set6Bits</a></div></div><div class=MEntry><div class=MFile><a href="../../bitarray/cpct_setBit-asm.html">cpct_setBit</a></div></div><div class=MEntry><div class=MFile><a href="../../bitarray/bitarray_macros-h.html">Useful macros</a></div></div></div></div></div><div class=MEntry><div class=MGroup><a href="javascript:ToggleMenu('MGroupContent4')">Commandline</a><div class=MGroupContent id=MGroupContent4><div class=MEntry><div class=MGroup><a href="javascript:ToggleMenu('MGroupContent3')">C_scripts</a><div class=MGroupContent id=MGroupContent3><div class=MEntry><div class=MFile><a href="../../commandline/c_scripts/bin2sna/src/main-h.html">cpct_bin2sna</a></div></div><div class=MEntry><div class=MFile><a href="../../commandline/c_scripts/binpatch/src/main-h.html">cpct_binpatch</a></div></div><div class=MEntry><div class=MFile><a href="../../commandline/c_scripts/tmx2data/src/main-h.html">cpct_tmx2data</a></div></div></div></div></div><div class=MEntry><div class=MFile><a href="../../commandline/cpct_aks2c-.html">cpct_aks2c</a></div></div><div class=MEntry><div class=MFile><a href="../../commandline/cpct_bin2c-.html">cpct_bin2c</a></div></div><div class=MEntry><div class=MFile><a href="../../commandline/cpct_img2tileset-.html">cpct_img2tileset</a></div></div><div class=MEntry><div class=MFile><a href="../../commandline/cpct_installrslib-.html">cpct_installrslib</a></div></div><div class=MEntry><div class=MFile><a href="../../commandline/cpct_mkproject-.html">cpct_mkproject</a></div></div><div class=MEntry><div class=MFile><a href="../../commandline/cpct_pack-.html">cpct_pack</a></div></div><div class=MEntry><div class=MFile><a href="../../commandline/cpct_rgas2c-.html">cpct_rgas2c</a></div></div><div class=MEntry><div class=MFile><a href="../../commandline/cpct_rvm-.html">cpct_rvm</a></div></div><div class=MEntry><div class=MFile><a href="../../commandline/cpct_sp2tiles-.html">cpct_sp2tile</a></div></div><div class=MEntry><div class=MFile><a href="../../commandline/cpct_tmx2csv-.html">cpct_tmx2csv</a></div></div><div class=MEntry><div class=MFile><a href="../../commandline/cpct_winape-.html">cpct_winape</a></div></div></div></div></div><div class=MEntry><div class=MGroup><a href="javascript:ToggleMenu('MGroupContent5')">Compression</a><div class=MGroupContent id=MGroupContent5><div class=MEntry><div class=MFile><a href="../../compression/cpct_zx7b_decrunch_s-asm.html">cpct_zx7b_decrunch_s</a></div></div></div></div></div><div class=MEntry><div class=MGroup><a href="javascript:ToggleMenu('MGroupContent6')">Easytilemaps</a><div class=MGroupContent id=MGroupContent6><div class=MEntry><div class=MFile><a href="../../easytilemaps/cpct_etm_drawTileBox2x4-asm.html">cpct_etm_drawTileBox2x4</a></div></div><div class=MEntry><div class=MFile><a href="../../easytilemaps/cpct_etm_drawTilemap2x4_f-asm.html">cpct_etm_drawTilemap2x4_f</a></div></div><div class=MEntry><div class=MFile><a href="../../easytilemaps/cpct_etm_drawTilemap4x8_ag-asm.html">cpct_etm_drawTilemap4x8_ag</a></div></div><div class=MEntry><div class=MFile><a href="../../easytilemaps/cpct_etm_drawTilemap4x8_agf-asm.html">cpct_etm_drawTilemap4x8_agf</a></div></div><div class=MEntry><div class=MFile><a href="../../easytilemaps/cpct_etm_drawTileRow2x4-s.html">cpct_etm_drawTileRow2x4</a></div></div><div class=MEntry><div class=MFile><a href="../../easytilemaps/cpct_etm_setDrawTilemap4x8_ag-asm.html">cpct_etm_setDrawTilemap4x8_ag</a></div></div><div class=MEntry><div class=MFile><a href="../../easytilemaps/cpct_etm_setDrawTilemap4x8_agf-asm.html">cpct_etm_setDrawTilemap4x8_agf</a></div></div><div class=MEntry><div class=MFile><a href="../../easytilemaps/cpct_etm_setTileset2x4-s.html">cpct_etm_setTileset2x4</a></div></div><div class=MEntry><div class=MFile><a href="../../easytilemaps/easytilemaps-h.html">EasyTilemaps</a></div></div></div></div></div><div class=MEntry><div class=MGroup><a href="javascript:ToggleMenu('MGroupContent7')">Firmware</a><div class=MGroupContent id=MGroupContent7><div class=MEntry><div class=MFile><a href="../../firmware/cpc_mode_rom_status-s.html">cpct_mode_rom_status</a></div></div><div class=MEntry><div class=MFile><a href="../../firmware/cpct_reenableFirmware-s.html">cpct_reenableFirmware</a></div></div><div class=MEntry><div class=MFile><a href="../../firmware/cpct_removeInterruptHandler-s.html">cpct_removeInterruptHandler.s</a></div></div><div class=MEntry><div class=MFile><a href="../../firmware/cpct_setInterruptHandler-s.html">cpct_setInterruptHandler</a></div></div><div class=MEntry><div class=MFile><a href="../../firmware/cpct_enableDisableROMs-s.html">Enabling / disabling ROMs</a></div></div><div class=MEntry><div class=MFile><a href="../../firmware/firmware-s.html">Firmware&amp;ROM constants</a></div></div></div></div></div><div class=MEntry><div class=MGroup><a href="javascript:ToggleMenu('MGroupContent8')">Keyboard</a><div class=MGroupContent id=MGroupContent8><div class=MEntry><div class=MFile><a href="../../keyboard/cpct_isAnyKeyPressed-s.html">cpct_isAnyKeyPressed</a></div></div><div class=MEntry><div class=MFile><a href="../../keyboard/cpct_isAnyKeyPressed_f-s.html">cpct_isAnyKeyPressed_f</a></div></div><div class=MEntry><div class=MFile><a href="../../keyboard/cpct_isKeyPressed-s.html">cpct_isKeyPressed</a></div></div><div class=MEntry><div class=MFile><a href="../../keyboard/cpct_scanKeyboard-s.html">cpct_scanKeyboard</a></div></div><div class=MEntry><div class=MFile><a href="../../keyboard/cpct_scanKeyboard_f-s.html">cpct_scanKeyboard_f</a></div></div><div class=MEntry><div class=MFile><a href="../../keyboard/cpct_scanKeyboard_i-s.html">cpct_scanKeyboard_i</a></div></div><div class=MEntry><div class=MFile><a href="../../keyboard/cpct_scanKeyboard_if-s.html">cpct_scanKeyboard_if</a></div></div><div class=MEntry><div class=MFile><a href="../../keyboard/keyboard-h-s.html">Key Definitions (asm)</a></div></div><div class=MEntry><div class=MFile><a href="../../keyboard/keyboard-h.html">Keyboard Mappings&amp;Constants</a></div></div><div class=MEntry><div class=MFile><a href="../../keyboard/keyboard-txt.html">Keyboard Technicals</a></div></div></div></div></div><div class=MEntry><div class=MGroup><a href="javascript:ToggleMenu('MGroupContent9')">Loaders</a><div class=MGroupContent id=MGroupContent9><div class=MEntry><div class=MFile><a href="../../loaders/cpct_miniload-asm.html">cpct_miniload</a></div></div></div></div></div><div class=MEntry><div class=MGroup><a href="javascript:ToggleMenu('MGroupContent10')">Macros</a><div class=MGroupContent id=MGroupContent10><div class=MEntry><div class=MFile><a href="../../macros/allmacros-h.html">allmacros.h</a></div></div><div class=MEntry><div class=MFile><a href="../../macros/allmacros-h-s.html">allmacros.h.s</a></div></div><div class=MEntry><div class=MFile><a href="../../macros/cpct_maths-h-s.html">Math Macros</a></div></div><div class=MEntry><div class=MFile><a href="../../macros/cpct_opcodeConstants-h-s.html">Opcodes</a></div></div><div class=MEntry><div class=MFile><a href="../../macros/cpct_reverseBits-h-s.html">Reverse Bits</a></div></div><div class=MEntry><div class=MFile><a href="../../macros/cpct_undocumentedOpcodes-h-s.html">Undocumented Opcodes</a></div></div></div></div></div><div class=MEntry><div class=MGroup><a href="javascript:ToggleMenu('MGroupContent11')">Memutils</a><div class=MGroupContent id=MGroupContent11><div class=MEntry><div class=MFile><a href="../../memutils/cpct_memcpy-asm.html">cpct_memcpy</a></div></div><div class=MEntry><div class=MFile><a href="../../memutils/cpct_memset-asm.html">cpct_memset</a></div></div><div class=MEntry><div class=MFile><a href="../../memutils/cpct_memset_f64-asm.html">cpct_memset_f64</a></div></div><div class=MEntry><div class=MFile><a href="../../memutils/cpct_memset_f8-asm.html">cpct_memset_f8</a></div></div><div class=MEntry><div class=MFile><a href="../../memutils/cpct_pageMemory-asm.html">cpct_pageMemory</a></div></div><div class=MEntry><div class=MFile><a href="../../memutils/cpct_setStackLocation-s.html">cpct_setStackLocation</a></div></div><div class=MEntry><div class=MFile><a href="../../memutils/cpct_waitHalts-asm.html">cpct_waitHalts</a></div></div><div class=MEntry><div class=MFile><a href="../../memutils/banks-h.html">Memory Pagination Macros</a></div></div><div class=MEntry><div class=MFile><a href="../../memutils/relocation-h.html">Memory Relocation Utilities</a></div></div></div></div></div><div class=MEntry><div class=MGroup><a href="javascript:ToggleMenu('MGroupContent12')">Random</a><div class=MGroupContent id=MGroupContent12><div class=MEntry><div class=MFile><a href="../../random/cpct_getRandom_glfsr-s.html">cpct_getRandom_glfsr16</a></div></div><div class=MEntry><div class=MFile><a href="../../random/cpct_getRandom_lcg_u8-s.html">cpct_getRandom_lcg_u8</a></div></div><div class=MEntry><div class=MFile><a href="../../random/cpct_getRandom_mxor_u16-s.html">cpct_getRandom_mxor_u16</a></div></div><div class=MEntry><div class=MFile><a href="../../random/cpct_getRandom_mxor_u32-s.html">cpct_getRandom_mxor_u32</a></div></div><div class=MEntry><div class=MFile><a href="../../random/cpct_getRandom_mxor_u8-s.html">cpct_getRandom_mxor_u8</a></div></div><div class=MEntry><div class=MFile><a href="../../random/cpct_getRandom_xsp40_u8-s.html">cpct_getRandom_xsp40_u8</a></div></div><div class=MEntry><div class=MFile><a href="../../random/cpct_mxor32_seed-s.html">cpct_mxor32_seed</a></div></div><div class=MEntry><div class=MFile><a href="../../random/cpct_nextRandom_mxor_u32-s.html">cpct_nextRandom_mxor_u32</a></div></div><div class=MEntry><div class=MFile><a href="../../random/cpct_nextRandom_mxor_u8-s.html">cpct_nextRandom_mxor_u8</a></div></div><div class=MEntry><div class=MFile><a href="../../random/cpct_nextRandom_mxor532_u8-s.html">cpct_nextRandom_mxor532_u8</a></div></div><div class=MEntry><div class=MFile><a href="../../random/cpct_restoreState_mxor_u16-s.html">cpct_restoreState_mxor_u16</a></div></div><div class=MEntry><div class=MFile><a href="../../random/cpct_restoreState_mxor_u8-s.html">cpct_restoreState_mxor_u8</a></div></div><div class=MEntry><div class=MFile><a href="../../random/cpct_setSeed_glfsr-s.html">cpct_setSeed_glfsr16</a></div></div><div class=MEntry><div class=MFile><a href="../../random/cpct_setSeed_lcg_u8-s.html">cpct_setSeed_lcg_u8</a></div></div><div class=MEntry><div class=MFile><a href="../../random/cpct_setSeed_mxor-s.html">cpct_setSeed_mxor</a></div></div><div class=MEntry><div class=MFile><a href="../../random/cpct_setSeed_xsp40_u8-asm.html">cpct_setSeed_xsp40_u8</a></div></div><div class=MEntry><div class=MFile><a href="../../random/cpct_setTaps_glfsr-s.html">cpct_setTaps_glfsr16</a></div></div><div class=MEntry><div class=MFile><a href="../../random/random_types-h.html">Defined Types</a></div></div><div class=MEntry><div class=MFile><a href="../../random/random-h.html">Random</a></div></div></div></div></div><div class=MEntry><div class=MGroup><a href="javascript:ToggleMenu('MGroupContent17')">Sprites</a><div class=MGroupContent id=MGroupContent17><div class=MEntry><div class=MGroup><a href="javascript:ToggleMenu('MGroupContent13')">Blending</a><div class=MGroupContent id=MGroupContent13><div class=MEntry><div class=MFile><a href="../blending/sprite_types-h.html">Blended-Sprites Structs</a></div></div><div class=MEntry><div class=MFile><a href="../blending/cpct_drawSpriteBlended-asm.html">cpct_drawSpriteBlended</a></div></div><div class=MEntry><div class=MFile><a href="../blending/cpct_setBlendMode-s.html">cpct_setBlendMode</a></div></div></div></div></div><div class=MEntry><div class=MGroup><a href="javascript:ToggleMenu('MGroupContent14')">DrawTile</a><div class=MGroupContent id=MGroupContent14><div class=MEntry><div class=MFile><a href="../drawTile/cpct_drawTileAligned2x4_f-asm.html">cpct_drawTileAligned2x4_f</a></div></div><div class=MEntry><div class=MFile><a href="../drawTile/cpct_drawTileAligned2x8-asm.html">cpct_drawTileAligned2x8</a></div></div><div class=MEntry><div class=MFile><a href="../drawTile/cpct_drawTileAligned2x8_f-asm.html">cpct_drawTileAligned2x8_f</a></div></div><div class=MEntry><div class=MFile><a href="../drawTile/cpct_drawTileAligned4x4_f-asm.html">cpct_drawTileAligned4x4_f</a></div></div><div class=MEntry><div class=MFile><a href="../drawTile/cpct_drawTileAligned4x8-asm.html">cpct_drawTileAligned4x8</a></div></div><div class=MEntry><div class=MFile><a href="../drawTile/cpct_drawTileAligned4x8_f-asm.html">cpct_drawTileAligned4x8_f</a></div></div><div class=MEntry><div class=MFile><a href="../drawTile/cpct_drawTileGrayCode2x8_af-asm.html">cpct_drawTileGrayCode2x8_af</a></div></div></div></div></div><div class=MEntry><div class=MGroup><a href="javascript:ToggleMenu('MGroupContent15')">DrawToSpriteBuffer</a><div class=MGroupContent id=MGroupContent15><div class=MEntry><div class=MFile><a href="cpct_drawToSpriteBuffer-asm.html">cpct_drawToSpriteBuffer</a></div></div><div class=MEntry><div class=MFile id=MSelected>cpct_drawToSpriteBufferMasked</div></div><div class=MEntry><div class=MFile><a href="cpct_drawToSpriteBufferMaskedAlignedTable-asm.html">cpct_drawToSpriteBufferMaskedAlignedTable</a></div></div><div class=MEntry><div class=MFile><a href="drawToSpriteBuffer-h-s.html">Macros (asm)</a></div></div><div class=MEntry><div class=MFile><a href="drawToSpriteBuffer-h.html">Macros (C)</a></div></div></div></div></div><div class=MEntry><div class=MGroup><a href="javascript:ToggleMenu('MGroupContent16')">Flipping</a><div class=MGroupContent id=MGroupContent16><div class=MEntry><div class=MFile><a href="../flipping/cpct_drawSpriteHFlip_at-asm.html">cpct_drawSpriteHFlip_at</a></div></div><div class=MEntry><div class=MFile><a href="../flipping/cpct_drawSpriteHFlipMasked_at-asm.html">cpct_drawSpriteHFlipMasked_at</a></div></div><div class=MEntry><div class=MFile><a href="../flipping/cpct_drawSpriteVFlip-asm.html">cpct_drawSpriteVFlip</a></div></div><div class=MEntry><div class=MFile><a href="../flipping/cpct_drawSpriteVFlip_f-asm.html">cpct_drawSpriteVFlip_f</a></div></div><div class=MEntry><div class=MFile><a href="../flipping/cpct_drawSpriteVFlipMasked-asm.html">cpct_drawSpriteVFlipMasked</a></div></div><div class=MEntry><div class=MFile><a href="../flipping/cpct_drawSpriteVFlipMasked_at-asm.html">cpct_drawSpriteVFlipMasked_at</a></div></div><div class=MEntry><div class=MFile><a href="../flipping/cpct_getBottomLeftPtr-asm.html">cpct_getBottomLeftPtr</a></div></div><div class=MEntry><div class=MFile><a href="../flipping/cpct_hflipSpriteM0-asm.html">cpct_hflipSpriteM0</a></div></div><div class=MEntry><div class=MFile><a href="../flipping/cpct_hflipSpriteM0_r-asm.html">cpct_hflipSpriteM0_r</a></div></div><div class=MEntry><div class=MFile><a href="../flipping/cpct_hflipSpriteM1-asm.html">cpct_hflipSpriteM1</a></div></div><div class=MEntry><div class=MFile><a href="../flipping/cpct_hflipSpriteM1_r-asm.html">cpct_hflipSpriteM1_r</a></div></div><div class=MEntry><div class=MFile><a href="../flipping/cpct_hflipSpriteM2-asm.html">cpct_hflipSpriteM2</a></div></div><div class=MEntry><div class=MFile><a href="../flipping/cpct_hflipSpriteM2_r-asm.html">cpct_hflipSpriteM2_r</a></div></div><div class=MEntry><div class=MFile><a href="../flipping/cpct_hflipSpriteMaskedM0-asm.html">cpct_hflipSpriteMaskedM0</a></div></div><div class=MEntry><div class=MFile><a href="../flipping/cpct_hflipSpriteMaskedM1-asm.html">cpct_hflipSpriteMaskedM1</a></div></div><div class=MEntry><div class=MFile><a href="../flipping/cpct_hflipSpriteMaskedM2-asm.html">cpct_hflipSpriteMaskedM2</a></div></div><div class=MEntry><div class=MFile><a href="../flipping/cpct_vflipSprite-asm.html">cpct_vflipSprite</a></div></div><div class=MEntry><div class=MFile><a href="../flipping/flipping_macros-h-s.html">cpctm_ld_spbloff</a></div></div><div class=MEntry><div class=MFile><a href="../flipping/flipping_macros-h.html">flipping_macros.h</a></div></div><div class=MEntry><div class=MFile><a href="../flipping/flipping_table_macros-h.html">Pixel Horizontally Flipping Macros</a></div></div><div class=MEntry><div class=MFile><a href="../flipping/flipping_tables-h.html">Pixel Horizontally Flipping Tables</a></div></div></div></div></div><div class=MEntry><div class=MFile><a href="../cpct_drawSolidBox-asm.html">cpct_drawSolidBox</a></div></div><div class=MEntry><div class=MFile><a href="../cpct_drawSprite-asm.html">cpct_drawSprite</a></div></div><div class=MEntry><div class=MFile><a href="../cpct_drawSpriteMasked-asm.html">cpct_drawSpriteMasked</a></div></div><div class=MEntry><div class=MFile><a href="../cpct_drawSpriteMaskedAlignedTable-asm.html">cpct_drawSpriteMaskedAlignedTable</a></div></div><div class=MEntry><div class=MFile><a href="../screenToSprite/cpct_getScreenToSprite-asm.html">cpct_getScreenToSprite</a></div></div><div class=MEntry><div class=MFile><a href="../cpct_px2byteM0-asm.html">cpct_px2byteM0</a></div></div><div class=MEntry><div class=MFile><a href="../cpct_px2byteM1-s.html">cpct_px2byteM1</a></div></div><div class=MEntry><div class=MFile><a href="../pixel_macros-h.html">pixel_macros.h</a></div></div><div class=MEntry><div class=MFile><a href="../transparency_table_macros-h.html">Transparency Macros</a></div></div><div class=MEntry><div class=MFile><a href="../transparency_tables_m0-h.html">Transparency Tables for Mode 0</a></div></div><div class=MEntry><div class=MFile><a href="../transparency_tables_m1-h.html">Transparency Tables for Mode 1</a></div></div></div></div></div><div class=MEntry><div class=MGroup><a href="javascript:ToggleMenu('MGroupContent18')">Strings</a><div class=MGroupContent id=MGroupContent18><div class=MEntry><div class=MFile><a href="../../strings/cpct_drawCharM0-asm.html">cpct_drawCharM0</a></div></div><div class=MEntry><div class=MFile><a href="../../strings/cpct_drawCharM0_inner-s.html">cpct_drawCharM0_inner_asm</a></div></div><div class=MEntry><div class=MFile><a href="../../strings/cpct_drawCharM1-asm.html">cpct_drawCharM1</a></div></div><div class=MEntry><div class=MFile><a href="../../strings/cpct_drawCharM1_f-s.html">cpct_drawCharM1_f</a></div></div><div class=MEntry><div class=MFile><a href="../../strings/cpct_drawCharM1_inner-s.html">cpct_drawCharM1_inner_asm</a></div></div><div class=MEntry><div class=MFile><a href="../../strings/cpct_drawCharM2-asm.html">cpct_drawCharM2</a></div></div><div class=MEntry><div class=MFile><a href="../../strings/cpct_drawCharM2_inner-s.html">cpct_drawCharM2_inner_asm</a></div></div><div class=MEntry><div class=MFile><a href="../../strings/cpct_drawStringM0-asm.html">cpct_drawStringM0</a></div></div><div class=MEntry><div class=MFile><a href="../../strings/cpct_drawStringM1-asm.html">cpct_drawStringM1</a></div></div><div class=MEntry><div class=MFile><a href="../../strings/cpct_drawStringM1_f-s.html">cpct_drawStringM1_f</a></div></div><div class=MEntry><div class=MFile><a href="../../strings/cpct_drawStringM2-asm.html">cpct_drawStringM2</a></div></div><div class=MEntry><div class=MFile><a href="../../strings/cpct_setDrawCharM0-asm.html">cpct_setDrawCharM0</a></div></div><div class=MEntry><div class=MFile><a href="../../strings/cpct_setDrawCharM1-asm.html">cpct_setDrawCharM1</a></div></div><div class=MEntry><div class=MFile><a href="../../strings/cpct_setDrawCharM2-asm.html">cpct_setDrawCharM2</a></div></div><div class=MEntry><div class=MFile><a href="../../strings/cpct_dc_mode0_ct-s.html">dc_mode0_ct</a></div></div><div class=MEntry><div class=MFile><a href="../../strings/cpct_dc_mode1_ct-s.html">dc_mode1_ct</a></div></div><div class=MEntry><div class=MFile><a href="../../strings/cpct_putChar-s.html">putchar</a></div></div></div></div></div><div class=MEntry><div class=MGroup><a href="javascript:ToggleMenu('MGroupContent19')">Video</a><div class=MGroupContent id=MGroupContent19><div class=MEntry><div class=MFile><a href="../../video/colours-h-s.html">Colours (asm)</a></div></div><div class=MEntry><div class=MFile><a href="../../video/colours-h.html">Colours (C)</a></div></div><div class=MEntry><div class=MFile><a href="../../video/cpct_count2VSYNC-s.html">cpct_count2VSYNC</a></div></div><div class=MEntry><div class=MFile><a href="../../video/cpct_firmware2hw_colour_table-s.html">cpct_firmware2hw_colour</a></div></div><div class=MEntry><div class=MFile><a href="../../video/cpct_fw2hw-asm.html">cpct_fw2hw</a></div></div><div class=MEntry><div class=MFile><a href="../../video/cpct_getHWColour-s.html">cpct_getHWColour</a></div></div><div class=MEntry><div class=MFile><a href="../../video/cpct_getScreenPtr-asm.html">cpct_getScreenPtr</a></div></div><div class=MEntry><div class=MFile><a href="../../video/cpct_setCRTCReg-asm.html">cpct_setCRTCReg</a></div></div><div class=MEntry><div class=MFile><a href="../../video/cpct_setPALColour-asm.html">cpct_setPALColour</a></div></div><div class=MEntry><div class=MFile><a href="../../video/cpct_setPalette-asm.html">cpct_setPalette</a></div></div><div class=MEntry><div class=MFile><a href="../../video/cpct_setVideoMemoryOffset-s.html">cpct_setVideoMemoryOffset</a></div></div><div class=MEntry><div class=MFile><a href="../../video/cpct_setVideoMemoryPage-s.html">cpct_setVideoMemoryPage</a></div></div><div class=MEntry><div class=MFile><a href="../../video/cpct_setVideoMode-asm.html">cpct_setVideoMode</a></div></div><div class=MEntry><div class=MFile><a href="../../video/cpct_waitVSYNC-s.html">cpct_waitVSYNC</a></div></div><div class=MEntry><div class=MFile><a href="../../video/video_macros-h-s.html">Macros (asm)</a></div></div><div class=MEntry><div class=MFile><a href="../../video/video_macros-h.html">Macros (C)</a></div></div></div></div></div><div class=MEntry><div class=MText>______________________________________________________________________</div></div><div class=MEntry><div class=MFile><a href="../../gpl-license-txt.html">License</a></div></div><div class=MEntry><div class=MGroup><a href="javascript:ToggleMenu('MGroupContent20')">Index</a><div class=MGroupContent id=MGroupContent20><div class=MEntry><div class=MIndex><a href="../../../index/Constants.html">Constants</a></div></div><div class=MEntry><div class=MIndex><a href="../../../index/General.html">Everything</a></div></div><div class=MEntry><div class=MIndex><a href="../../../index/Files.html">Files</a></div></div><div class=MEntry><div class=MIndex><a href="../../../index/Functions.html">Functions</a></div></div><div class=MEntry><div class=MIndex><a href="../../../index/Macros.html">Macros</a></div></div><div class=MEntry><div class=MIndex><a href="../../../index/Types.html">Types</a></div></div><div class=MEntry><div class=MIndex><a href="../../../index/Variables.html">Variables</a></div></div></div></div></div><script type="text/javascript"><!--
var searchPanel = new SearchPanel("searchPanel", "HTML", "../../../search");
--></script><div id=MSearchPanel class=MSearchPanelInactive><input type=text id=MSearchField value=Search onFocus="searchPanel.OnSearchFieldFocus(true)" onBlur="searchPanel.OnSearchFieldFocus(false)" onKeyUp="searchPanel.OnSearchFieldChange()"><select id=MSearchType onFocus="searchPanel.OnSearchTypeFocus(true)" onBlur="searchPanel.OnSearchTypeFocus(false)" onChange="searchPanel.OnSearchTypeChange()"><option  id=MSearchEverything selected value="General">Everything</option><option value="Constants">Constants</option><option value="Files">Files</option><option value="Functions">Functions</option><option value="Macros">Macros</option><option value="Types">Types</option><option value="Variables">Variables</option></select></div><script language=JavaScript><!--
HideAllBut([15, 17], 21);// --></script></div><!--Menu-->



<!--START_ND_TOOLTIPS-->
<div class=CToolTip id="tt1"><div class=CFunction>Draws an sprite inside another sprite&rsquo;s buffer, using mask as transparency information to prevent erasing the background. </div></div><div class=CToolTip id="tt2"><div class=CType>unsigned int       (u16 = unsigned 16-bits, 2 bytes)</div></div><div class=CToolTip id="tt3"><div class=CType>unsigned char      (u8  = unsigned  8-bits, 1 byte )</div></div><div class=CToolTip id="tt4"><div class=CFunction>Copies a masked sprite from an array to video memory (or to a screen buffer), using mask as transparency information, to prevent erasing the background.</div></div><!--END_ND_TOOLTIPS-->




<div id=MSearchResultsWindow><iframe src="" frameborder=0 name=MSearchResults id=MSearchResults></iframe><a href="javascript:searchPanel.CloseResultsWindow()" id=MSearchResultsWindowClose>Close</a></div>


<script language=JavaScript><!--
if (browserType) {if (browserVer) {document.write("</div>"); }document.write("</div>");}// --></script></body></html>